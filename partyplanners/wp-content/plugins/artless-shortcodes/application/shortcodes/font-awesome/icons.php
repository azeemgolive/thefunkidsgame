<?php
/**
 * @package    artless Shortcodes
 * @author     Christian Glingener <glingener.christian@gmail.com>
 * @version    1.0.0
 * @copyright  2014 artlessthemes.com
 * @link       http://artlessthemes.com/
 */

$icons = array(
	array(
		'headline' => 'Web Application Icons',
        'tab-title' => 'Web Application',
		'icons' => array(
			'adjust','anchor','archive','arrows','arrows-h','arrows-v','asterisk','ban','bar-chart-o','barcode','bars','beer','bell','bell-o','bolt','book','bookmark','bookmark-o','briefcase','bug','building-o','bullhorn','bullseye','calendar','calendar-o','camera','camera-retro','caret-square-o-down','caret-square-o-left','caret-square-o-right','caret-square-o-up','certificate','check','check-circle','check-circle-o','check-square','check-square-o','circle','circle-o','clock-o','cloud','cloud-download','cloud-upload','code','code-fork','coffee','cog','cogs','comment','comment-o','comments','comments-o','compass','credit-card','crop','crosshairs','cutlery','dashboard','desktop','dot-circle-o','download','edit','ellipsis-h','ellipsis-v','envelope','envelope-o','eraser','exchange','exclamation','exclamation-circle','exclamation-triangle','external-link','external-link-square','eye','eye-slash','female','fighter-jet','film','filter','fire','fire-extinguisher','flag','flag-checkered','flag-o','flash','flask','folder','folder-o','folder-open','folder-open-o','frown-o','gamepad','gavel','gear','gears','gift','glass','globe','group','hdd-o','headphones','heart','heart-o','home','inbox','info','info-circle','key','keyboard-o','laptop','leaf','legal','lemon-o','level-down','level-up','lightbulb-o','location-arrow','lock','magic','magnet','mail-forward','mail-reply','mail-reply-all','male','map-marker','meh-o','microphone','microphone-slash','minus','minus-circle','minus-square','minus-square-o','mobile','mobile-phone','money','moon-o','music','pencil','pencil-square','pencil-square-o','phone','phone-square','picture-o','plane','plus','plus-circle','plus-square','plus-square-o','power-off','print','puzzle-piece','qrcode','question','question-circle','quote-left','quote-right','random','refresh','reply','reply-all','retweet','road','rocket','rss','rss-square','search','search-minus','search-plus','share','share-square','share-square-o','shield','shopping-cart','sign-in','sign-out','signal','sitemap','smile-o','sort','sort-alpha-asc','sort-alpha-desc','sort-amount-asc','sort-amount-desc','sort-asc','sort-desc','sort-down','sort-numeric-asc','sort-numeric-desc','sort-up','spinner','square','square-o','star','star-half','star-half-empty','star-half-full','star-half-o','star-o','subscript','suitcase','sun-o','superscript','tablet','tachometer','tag','tags','tasks','terminal','thumb-tack','thumbs-down','thumbs-o-down','thumbs-o-up','thumbs-up','ticket','times','times-circle','times-circle-o','tint','toggle-down','toggle-left','toggle-right','toggle-up','trash-o','trophy','truck','umbrella','unlock','unlock-alt','unsorted','upload','user','users','video-camera','volume-down','volume-off','volume-up','warning','wheelchair','wrench',
		)
	),

	array(
		'headline' => 'Form Control Icons',
        'tab-title' => 'Form',
		'icons' => array(
			'check-square','check-square-o','circle','circle-o','dot-circle-o','minus-square','minus-square-o','plus-square','plus-square-o','square','square-o',
		)
	),

	array(
		'headline' => 'Currency Icons',
        'tab-title' => 'Currencies',
		'icons' => array(
			'bitcoin','btc','cny','dollar','eur','euro','gbp','inr','jpy','krw','money','rmb','rouble','rub','ruble','rupee','try','turkish-lira','usd','won','yen',
		)
	),

	array(
		'headline' => 'Text Editor Icons',
        'tab-title' => 'Editor',
		'icons' => array(
			'align-center','align-justify','align-left','align-right','bold','chain','chain-broken','clipboard','columns','copy','cut','dedent','eraser','file','file-o','file-text','file-text-o','files-o','floppy-o','font','indent','italic','link','list','list-alt','list-ol','list-ul','outdent','paperclip','paste','repeat','rotate-left','rotate-right','save','scissors','strikethrough','table','text-height','text-width','th','th-large','th-list','underline','undo','unlink'
		)
	),

	array(
		'headline' => 'Directional Icons',
        'tab-title' => 'Directional',
		'icons' => array(
			'angle-double-down','angle-double-left','angle-double-right','angle-double-up','angle-down','angle-left','angle-right','angle-up','arrow-circle-down','arrow-circle-left','arrow-circle-o-down','arrow-circle-o-left','arrow-circle-o-right','arrow-circle-o-up','arrow-circle-right','arrow-circle-up','arrow-down','arrow-left','arrow-right','arrow-up','arrows','arrows-alt','arrows-h','arrows-v','caret-down','caret-left','caret-right','caret-square-o-down','caret-square-o-left','caret-square-o-right','caret-square-o-up','caret-up','chevron-circle-down','chevron-circle-left','chevron-circle-right','chevron-circle-up','chevron-down','chevron-left','chevron-right','chevron-up','hand-o-down','hand-o-left','hand-o-right','hand-o-up','long-arrow-down','long-arrow-left','long-arrow-right','long-arrow-up','toggle-down','toggle-left','toggle-right','toggle-up'
		)
	),

	array(
		'headline' => 'Video Player Icons',
        'tab-title' => 'Video Player',
		'icons' => array(
			'arrows-alt','backward','compress','eject','expand','fast-backward','fast-forward','forward','pause','play','play-circle','play-circle-o','step-backward','step-forward','stop','youtube-play',
		)
	),

	array(
		'headline' => 'Brand Icons',
        'tab-title' => 'Brands',
		'icons' => array(
			'adn','android','apple','bitbucket','bitbucket-square','bitcoin','btc','css3','dribbble','dropbox','facebook','facebook-square','flickr','foursquare','github','github-alt','github-square','gittip','google-plus','google-plus-square','html5','instagram','linkedin','linkedin-square','linux','maxcdn','pagelines','pinterest','pinterest-square','renren','skype','stack-exchange','stack-overflow','trello','tumblr','tumblr-square','twitter','twitter-square','vimeo-square','vk','weibo','windows','xing','xing-square','youtube','youtube-play','youtube-square',
		)
	),

	array(
		'headline' => 'Medical Icons',
        'tab-title' => 'Medical',
		'icons' => array(
			'ambulance','h-square','hospital-o','medkit','plus-square','stethoscope','user-md','wheelchair'
		)
	)
);


$html = '';
$tabs = '';
$tabs_count = 1;
foreach( $icons as $section ) {

    if( $tabs_count == 1 ) {
        $tabs .= '<li><a class="openContent current" href="javascript:void(0)" data-open-content="'.$tabs_count.'">'.$section['tab-title'].'</a></li>';
        $html .= '<div id="content'.$tabs_count.'" class="content">';
    } else {
        $tabs .= '<li><a class="openContent" data-open-content="'.$tabs_count.'">'.$section['tab-title'].'</a></li>';
        $html .= '<div id="content'.$tabs_count.'" class="content hidden">';
    }
    $tabs_count++;

    $html .= '<h2>'.$section['headline'].'</h2>';
    $html .= '<p>[sub_tabs]</p>';
    $icons_total = count( $section['icons'] );
    $icons_count = 0;
    $sub_tabs = '';
    $sub_count = 0;
	foreach( $section['icons'] as $icon ) {
        if( $icons_total <= 85 ) {
            $html .= '<div class="icon"><i class="fa fa-'.$icon.'" data-icon="'.$icon.'"></i></div>';
        } else {
            if( $icons_count == 0 or $icons_count % 85 == 0 ) {
                $sub_count++;
                if( $sub_count == 1 ) {
                    $sub_tabs .= '<a class="openSubContent current" href="javascript:void(0)" data-open-content="'. $tabs_count . $sub_count .'">Tab ' . $sub_count . '</a> | ';
                    $html .= '<div class="subcontent" id="subcontent' . $tabs_count . $sub_count .'">';
                } else {
                    $sub_tabs .= '<a class="openSubContent" href="javascript:void(0)" data-open-content="'. $tabs_count . $sub_count . '">Tab ' . $sub_count . '</a> | ';
                    $html .= '<div class="subcontent hidden" id="subcontent' .$tabs_count . $sub_count . '" class="hidden">';
                }
            }

            $html .= '<div class="icon"><i class="fa fa-'.$icon.'" data-icon="'.$icon.'"></i></div>';

            if( $icons_count == $icons_total-1 or $icons_count % 85 == 84 ) {
                $html .= '<div style="clear:both;"></div></div>';
            }

            $icons_count++;

        }
	}

    if( $sub_tabs != '' ) {
        $sub_tabs = rtrim( $sub_tabs, ' | ' );
        $html = str_replace( '[sub_tabs]', $sub_tabs, $html );
    } else {
        $html = str_replace( '<p>[sub_tabs]</p>', '', $html );
    }


	$html .= '<div style="clear:both;"></div>';
    $html .= '</div>';
}

$tabs .= '<li><a class="openContent" href="javascript:void(0)" data-open-content="99">Info</a></li>';
$html .= '<div id="content99" class="content hidden"><h2>Additional Info</h2><p>By default the size and color will be inherited until you add the attributes <b>size</b> and <b>color</b>.<br />For example: <b>[fa icon="rocket" size="32px" color="#f00000"]</b><br />
Output: <i class="fa fa-rocket" style="font-size:32px; color:#f00"></i></p></div>'
?>

<!DOCTYPE html>
<html>
<head>
    <title>artless Icon Picker</title>
	<link rel="stylesheet" href="css/font-awesome.min.css" media="all" />
	<style type="text/css" media="all">
		i.fa {
			font-size: 26px;
			color: #666;

		}

        div.icon {
            width: 39px;
            padding: 4px 0;
            text-align: center;
            float: left;
        }

		#flipper i.fa:hover {
			color: #56c16b;
            cursor: pointer;
		}

        body {
            min-width: 0;
        }

        #wphead h1 {
            font-size: 24px;
            color: #555;
            margin: 0;
            padding: 10px;
        }
        #tabs {
            padding: 15px 3px 3px;
            background-color: #f1f1f1;
            border-bottom: 1px solid #dfdfdf;
            margin: 0;
        }
        #tabs li {
            display: inline;
        }
        a { text-decoration: none !important; }
        a.current,
        a.current:visited {
            color: #d54e21 !important;
        }

        #tabs a.current {
            background-color: #fff;
            border-color: #dfdfdf;
            border-bottom-color: #fff;
        }
        #tabs a {
            color: #2583AD;
            padding: 6px 5px !important;
            border-width: 1px 1px 0;
            border-style: solid solid none;
            border-color: #f1f1f1;
            text-decoration: none;
            cursor: pointer !important;
        }
        #tabs a:hover {
            color: #d54e21;
        }
        .wrap h2 {
            border-bottom-color: #dfdfdf;
            color: #555;
            margin: 5px 0;
            padding: 0;
            font-size: 18px;
        }
        #user_info {
            right: 5%;
            top: 5px;
        }
        h3 {
            font-size: 1.1em;
            margin-top: 10px;
            margin-bottom: 0px;
        }
        #flipper {
            margin: 0 0 40px;
            padding: 5px 0 10px 20px;
            background-color: #fff;
            border-left: 1px solid #dfdfdf;
            border-bottom: 1px solid #dfdfdf;
        }
        * html {
            overflow-x: hidden;
            overflow-y: scroll;
        }
        #flipper div p {
            margin-top: 0.4em;
            margin-bottom: 0.8em;
            text-align: justify;
        }
        th {
            text-align: center;
        }
        .top th {
            text-decoration: underline;
        }
        .top .key {
            text-align: center;
            width: 5em;
        }
        .top .action {
            text-align: left;
        }
        .align {
            border-left: 3px double #333;
            border-right: 3px double #333;
        }
        .keys {
            margin-bottom: 15px;
            width: 100%;
            border: 0 none;
        }
        .keys p {
            display: inline-block;
            margin: 0px;
            padding: 0px;
        }
        .keys .left { text-align: left; }
        .keys .center { text-align: center; }
        .keys .right { text-align: right; }
        td b {
            font-family: "Times New Roman" Times serif;
        }
        #buttoncontainer {
            text-align: center;
            margin-bottom: 20px;
        }
        #buttoncontainer a, #buttoncontainer a:hover {
            border-bottom: 0px;
        }
        .macos .win,
        .windows .mac {
            display: none;
        }

        .hidden {
            display: none;
        }

        input {
            padding: 3px;
            font-size: 14px;
        }
        #size { width: 15px; text-align:right; }
        #color { width: 50px; }
        #link { width: 150px;}

        .circleicon {
            display: inline-block;
            margin: 3px 3px;
            padding: 10px;
            color: #666;
            text-align: center;
            border-style: solid;
        }

        .icon-preview {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            min-height: 100px;
            border-top: 1px solid #666;
            background:#fff;
        }

        #preview {
            float: right;
            position: relative;
            padding: 10px 20px 10px 10px;
            min-height: 32px;
        }

        #preview i.fa {
            display: block;
        }

        .icon-attributes, .no-icon-selected {
            display: block;
            float: left;
            padding: 10px 0 0 20px;
            line-height: 24px;
        }

	</style>
</head>
<body class="windows wp-core-ui">

<ul id="tabs">
    <?php echo $tabs; ?>
</ul>

<div id="flipper" class="wrap">
    <?php echo $html; ?>
</div>


<div class="icon-preview"><div class="no-icon-selected"><b>Select an icon.</b></div><div class="icon-attributes" style="display: none;"><b>Icon Settings</b> (size and color will be inherited if not set)<br />Size: <input class="previewChange" id="size" type="text">em  Color: <input class="previewChange" id="color" type="text"> Link: <input class="previewChange" id="link" type="text" value="http://"> Circle<input id="circle" type="checkbox" /><br /><a id="insert" href="javascript:void(0);" style="margin-top: 10px;">Insert Icon</a> <a id="close" href="javascript:void(0);">Close</a></div><div id="preview"><div id="icon" data-icon=""></div></div></div>

<script type="text/javascript" src="js/jquery.1.9.1.min.js"></script>
<script type="text/javascript" src="js/tiny_mce_popup.js"></script>
<script type="text/javascript">
	( function( $ ) {

        $( 'a.openContent' ).on( 'click', function( e ) {
            e.preventDefault();
            var content = $( '#content' + $( this ).data('open-content') );

            $( 'a.openContent' ).removeClass( 'current' );
            $( this ).addClass( 'current' );
            $( 'div.content' ).addClass('hidden');
            content.removeClass('hidden');
        });

        $( 'a.openSubContent' ).on( 'click', function( e ) {
            e.preventDefault();
            var content = $( '#subcontent' + $( this ).data('open-content') );

            $( 'a.openSubContent' ).removeClass( 'current' );
            $( this ).addClass( 'current' );
            $( 'div.subcontent' ).addClass('hidden');
            content.removeClass( 'hidden' );
        });

        function previewUpdate() {
            var size = $( '#size' ).val();
            var color = $( '#color' ).val();
            var link = $( '#link' ).val();
            var circle = $( '#circle' ).is(':checked');
            var circleHtml = $( '.circleicon' );

            var icon = $( '#icon' );
            var previewIcon = icon.find( 'i' );
            if( size && size != '' ) previewIcon.css( 'font-size', size + 'em' );
            if( color && color != '') {
                previewIcon.css( 'color', color );
            } else {
                previewIcon.css( 'color', '#666' );
            }

            var previewIconHtml = '';

            /*
            if( icon.find( 'a' ).length > 0 ) {
                previewIconHtml = icon.find( 'a' ).html();
            } else {
                previewIconHtml = icon.html();
            }*/

            if( link && link != '' && link != 'http://' ) {
                icon.find('a.circleicon' ).attr('href', link );
            }

            previewIconHtml = icon.html();

            if( circle ) {
                circleHtml.css( 'border-color', '#666' );
            } else if( icon.find( 'a.circleicon' ).length > 0 ) {
                circleHtml.css( 'border-color', 'transparent' );
            }

            circleHtml.css( 'width', circleHtml.height() + 'px' );
            circleHtml.css( 'padding', ( circleHtml.height() * 0.5 ) + 'px' );
            circleHtml.css( '-webkit-border-radius', circleHtml.outerHeight() + 'px' );
            circleHtml.css( '-moz-border-radius', circleHtml.outerHeight() + 'px' );
            circleHtml.css( 'border-radius', circleHtml.outerHeight() + 'px' );

			var borderWidth = 0.1;
			if( size && size != '' ) {
				borderWidth =  size * 0.1;
			}

			if( borderWidth <= 0.1 ) {
				borderWidth = 2 + 'px';
			} else {
				borderWidth += 'em';
			}

            circleHtml.css( 'border-width', borderWidth );

            if( !circle ) {
                if( $('.icon-preview' ).height() > 100 ) {
                    circleHtml.css( 'padding', '0' );
                }
            }

            if( color && color != '' && circle ) circleHtml.css( 'border-color', color );

            //var flipper = $('#flipper');

            // iconAttributes.css('padding-top', ( ( $('.icon-preview' ).height() - iconAttributes.height() ) / 2 ) + 'px');
        }

        $( '.previewChange' ).on( 'change', function() {
            previewUpdate();
        } );

        $( '#circle' ).on( 'click', function() {
            previewUpdate();
        } );

		$('i.fa' ).on( 'click', function() {
			var icon = $( this ).data('icon');
            var color = $( '#color' ).val();
            var link = $( '#link' ).val();


            var previewIcon = $( '#icon' );

            $( '.no-icon-selected' ).hide();
            $( '.icon-attributes' ).show();

            previewIcon.data('icon', icon );
            previewIcon.html( '<a class="circleicon"><i class="fa fa-'+icon+'"></i></a>' );

            previewUpdate();

			//tinyMCEPopup.execCommand( 'mceInsertContent', 0, toEditor );
			//tinyMCEPopup.close();
		});

        $( '#insert' ).on('click',function() {
            var icon = $( '#icon' ).data('icon');

            var size = $( '#size' ).val();
            var color = $( '#color' ).val();
            var link = $( '#link' ).val();
            var circle = $( '#circle' ).is(':checked');

            var attributes = ' icon="'+ icon + '"';

            if( size && size != '' ) attributes += ' size="' + size + '"';
            if( color && color != '') attributes += ' color="' + color + '"';
            if( link && link != '' && link != 'http://' ) attributes += ' link="' + link + '"';
            if( circle ) attributes += ' circle';

            var toEditor = '[fa' + attributes + ']';

            tinyMCEPopup.execCommand( 'mceInsertContent', 0, toEditor );
        });

        $( '#close' ).on('click', function() {
            tinyMCEPopup.close();
        });


	} )( jQuery );

</script>
</body>
</html>
